@page
@model PRN221Project.Pages.Customer.ProfileModel
@{
}
@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger" role="alert">
        @TempData["ErrorMessage"]
    </div>
}
<div class="profile-section overlay mt-5 pt-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-4 text-center">
                <img src="~/assets/imgs/avatar-4.jpg" class="img-fluid rounded-circle" alt="User Image">
            </div>
            <div class="col-md-8">
                @if (Model.IsEditing)
                {
                    <form method="post">
                        <input type="hidden" asp-for="Customer.CustomerID" value="@Model.Customer.CustomerID" />
                        <div class="form-group">
                            <label for="FullName">Full Name</label>
                            <input class="form-control" id="FullName" asp-for="Customer.FullName" value="@Model.Customer.FullName" />
                            <span asp-validation-for="Customer.FullName" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label for="Email">Email</label>
                            <input type="email" class="form-control" id="Email" asp-for="Customer.Email" value="@Model.Customer.Email" />
                            <span asp-validation-for="Customer.Email" class="text-danger"></span>
                        </div>

                        <input type="hidden" class="form-control" id="UserName" asp-for="Customer.UserName" value="@Model.Customer.UserName" />
                    
                        <div class="form-group">
                            <label for="Address">Address</label>
                            <input class="form-control" id="Address" asp-for="Customer.Address" value="@Model.Customer.Address" />
                            <span asp-validation-for="Customer.Address" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label for="Phone">Phone</label>
                            <input class="form-control" id="Phone" asp-for="Customer.Phone" value="@Model.Customer.Phone" />
                            <span asp-validation-for="Customer.Phone" class="text-danger"></span>
                        </div>
                        <div class="buttons text-center">
                            <input type="submit" class="btn btn-success rounded w-lg btn-lg my-1" value="Save Profile" asp-page-handler="SaveProfile" />
                            <a href="#" class="btn btn-secondary rounded w-lg btn-lg my-1" onclick="document.getElementById('cancelEditForm').submit()">Cancel</a>
                        </div>
                    </form>
                    <form id="cancelEditForm" method="get">
                        <input type="hidden" asp-for="IsEditing" value="false" />
                    </form>
                }
                else
                {
                    <h3>@Model.Customer.FullName</h3>
                    <p><strong>Email:</strong> @Model.Customer.Email</p>
                    <p><strong>Username:</strong> @Model.Customer.UserName</p>
                    <p><strong>Full Name:</strong> @Model.Customer.FullName</p>
                    <p><strong>Address:</strong>@Model.Customer.Address </p>
                    <p><strong>Phone:</strong> @Model.Customer.Phone</p>
                    <div class="buttons text-center">
                        <form method="post">

                            <button type="submit" class="btn btn-primary rounded w-lg btn-lg my-1" asp-page-handler="EditProfile">Edit Profile</button>
                        </form>
                        <form asp-page-handler="Logout" asp-page="/Index" method="post">
                            <input style="background:none;border:none" class="btn btn-outline-light rounded w-lg btn-lg my-1" type="submit" value="Logout" />
                        </form>
                    </div>
                }
            </div>
        </div>
    </div>
</div>
<!-- End of User Profile Section -->